{"openapi":"3.0.1","info":{"title":"Attendly API","description":"교회 출석 관리 시스템 API","version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"인증 API","description":"회원가입, 로그인 및 토큰 갱신 API"},{"name":"출석 API","description":"출석 입력 및 조회 API"},{"name":"통계 API","description":"출석 통계 조회 API"}],"paths":{"/auth/signup":{"post":{"tags":["인증 API"],"summary":"회원가입","description":"새로운 사용자를 등록합니다.","operationId":"signup","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SignupResponse"}}}}}}},"/auth/refresh":{"post":{"tags":["인증 API"],"summary":"토큰 갱신","description":"리프레시 토큰을 사용하여 새로운 엑세스 토큰과 리프레시 토큰을 발급받습니다.","operationId":"refreshToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenRefreshRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TokenRefreshResponse"}}}}}}},"/auth/login":{"post":{"tags":["인증 API"],"summary":"로그인","description":"이메일과 비밀번호로 로그인하여 JWT 토큰을 발급받습니다.","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LoginResponse"}}}}}}},"/api/delegations":{"post":{"tags":["leader-delegation-controller"],"operationId":"createDelegation","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DelegationCreateRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/LeaderDelegationResponse"}}}}}}},"/api/attendance":{"get":{"tags":["출석 API"],"summary":"GBS 출석 조회","description":"특정 GBS의 특정 주차 출석 데이터를 조회합니다.","operationId":"getAttendancesByGbs","parameters":[{"name":"gbsId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"weekStart","in":"query","required":true,"schema":{"type":"string","format":"date"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AttendanceResponse"}}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["출석 API"],"summary":"출석 일괄 등록","description":"리더 권한으로 출석 데이터를 일괄 등록합니다.","operationId":"createAttendances","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AttendanceBatchRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AttendanceResponse"}}}}}},"security":[{"bearerAuth":[]}]}},"/auth/me":{"get":{"tags":["인증 API"],"summary":"현재 사용자 정보 조회","description":"현재 인증된 사용자의 정보를 조회합니다.","operationId":"getCurrentUser","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserResponse"}}}}}}},"/api/villages/{id}/report":{"get":{"tags":["통계 API"],"summary":"마을 출석 통계 조회","description":"특정 마을의 출석 통계를 조회합니다.","operationId":"getVillageStatistics","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"startDate","in":"query","required":true,"schema":{"type":"string","format":"date"}},{"name":"endDate","in":"query","required":true,"schema":{"type":"string","format":"date"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/VillageStatistics"}}}}},"security":[{"bearerAuth":[]}]}},"/api/village/{id}/attendance":{"get":{"tags":["출석 API"],"summary":"마을 출석 현황 조회","description":"특정 마을의 특정 주차 출석 현황을 집계하여 조회합니다.","operationId":"getVillageAttendance","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"weekStart","in":"query","required":true,"schema":{"type":"string","format":"date"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/VillageAttendanceResponse"}}}}},"security":[{"bearerAuth":[]}]}},"/api/gbs/{id}/report":{"get":{"tags":["통계 API"],"summary":"GBS 출석 통계 조회","description":"특정 GBS의 출석 통계를 조회합니다.","operationId":"getGbsStatistics","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"startDate","in":"query","required":true,"schema":{"type":"string","format":"date"}},{"name":"endDate","in":"query","required":true,"schema":{"type":"string","format":"date"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GbsStatistics"}}}}},"security":[{"bearerAuth":[]}]}},"/api/departments/{id}/report":{"get":{"tags":["통계 API"],"summary":"부서 출석 통계 조회","description":"특정 부서의 출석 통계를 조회합니다.","operationId":"getDepartmentStatistics","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"startDate","in":"query","required":true,"schema":{"type":"string","format":"date"}},{"name":"endDate","in":"query","required":true,"schema":{"type":"string","format":"date"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DepartmentStatistics"}}}}},"security":[{"bearerAuth":[]}]}},"/api/delegations/active":{"get":{"tags":["leader-delegation-controller"],"operationId":"getActiveDelegations","parameters":[{"name":"userId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"date","in":"query","required":false,"schema":{"type":"string","format":"date"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LeaderDelegationResponse"}}}}}}}}},"components":{"schemas":{"SignupRequest":{"required":["departmentId","email","name","password","role"],"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"},"name":{"type":"string"},"role":{"type":"string","enum":["ADMIN","MINISTER","VILLAGE_LEADER","LEADER","MEMBER"]},"departmentId":{"type":"integer","format":"int64"}}},"SignupResponse":{"required":["email","name","role","userId"],"type":"object","properties":{"userId":{"type":"integer","format":"int64"},"name":{"type":"string"},"email":{"type":"string"},"role":{"type":"string"}}},"TokenRefreshRequest":{"required":["refreshToken"],"type":"object","properties":{"refreshToken":{"type":"string"}}},"TokenRefreshResponse":{"required":["accessToken","refreshToken"],"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"}}},"LoginRequest":{"required":["email","password"],"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}}},"LoginResponse":{"required":["accessToken","name","refreshToken","role","userId"],"type":"object","properties":{"userId":{"type":"integer","format":"int64"},"name":{"type":"string"},"role":{"type":"string"},"accessToken":{"type":"string"},"refreshToken":{"type":"string"}}},"DelegationCreateRequest":{"required":["delegateId","delegatorId","endDate","gbsGroupId","startDate"],"type":"object","properties":{"delegatorId":{"type":"integer","format":"int64"},"delegateId":{"type":"integer","format":"int64"},"gbsGroupId":{"type":"integer","format":"int64"},"startDate":{"type":"string","format":"date"},"endDate":{"type":"string","format":"date"}}},"LeaderDelegationResponse":{"required":["delegateeId","delegateeName","delegatorId","delegatorName","gbsGroupId","gbsGroupName","id","startDate"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"delegatorId":{"type":"integer","format":"int64"},"delegatorName":{"type":"string"},"delegateeId":{"type":"integer","format":"int64"},"delegateeName":{"type":"string"},"gbsGroupId":{"type":"integer","format":"int64"},"gbsGroupName":{"type":"string"},"startDate":{"type":"string","format":"date"},"endDate":{"type":"string","format":"date"}}},"AttendanceBatchRequest":{"required":["attendances","gbsId","weekStart"],"type":"object","properties":{"gbsId":{"type":"integer","description":"GBS 그룹 ID","format":"int64","example":1},"weekStart":{"type":"string","description":"주차 시작일 (일요일 기준)","format":"date","example":"2025-01-05"},"attendances":{"type":"array","description":"조원별 출석 데이터","items":{"$ref":"#/components/schemas/AttendanceItemRequest"}}},"description":"출석 일괄 등록 요청"},"AttendanceItemRequest":{"required":["memberId","ministry","qtCount","worship"],"type":"object","properties":{"memberId":{"type":"integer","description":"조원 ID","format":"int64","example":5},"worship":{"type":"string","description":"예배 출석 상태 (O/X)","example":"O","enum":["O","X","O","X"]},"qtCount":{"maximum":6,"minimum":0,"type":"integer","description":"QT 횟수 (0-6)","format":"int32","example":5},"ministry":{"type":"string","description":"대학부 출석 등급 (A/B/C)","example":"A","enum":["A","B","C","A","B","C"]}},"description":"개별 조원 출석 데이터"},"AttendanceResponse":{"required":["id","memberId","memberName","ministry","qtCount","weekStart","worship"],"type":"object","properties":{"id":{"type":"integer","description":"출석 ID","format":"int64","example":1},"memberId":{"type":"integer","description":"조원 ID","format":"int64","example":5},"memberName":{"type":"string","description":"조원 이름","example":"홍길동"},"weekStart":{"type":"string","description":"주차 시작일","format":"date","example":"2025-01-05"},"worship":{"type":"string","description":"예배 출석 상태","example":"O","enum":["O","X"]},"qtCount":{"type":"integer","description":"QT 횟수","format":"int32","example":5},"ministry":{"type":"string","description":"대학부 출석 등급","example":"A","enum":["A","B","C"]}},"description":"출석 목록 응답"},"UserResponse":{"required":["createdAt","departmentId","departmentName","id","name","role","updatedAt"],"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"email":{"type":"string"},"role":{"type":"string","enum":["ADMIN","MINISTER","VILLAGE_LEADER","LEADER","MEMBER"]},"departmentId":{"type":"integer","format":"int64"},"departmentName":{"type":"string"},"birthDate":{"type":"string","format":"date"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"GbsStatistics":{"required":["attendanceRate","attendedMembers","averageQtCount","gbsId","gbsName","leaderName","totalMembers","weeklyStats"],"type":"object","properties":{"gbsId":{"type":"integer","description":"GBS 그룹 ID","format":"int64","example":1},"gbsName":{"type":"string","description":"GBS 그룹 이름","example":"믿음 GBS"},"leaderName":{"type":"string","description":"리더 이름","example":"이리더"},"totalMembers":{"type":"integer","description":"총원","format":"int32","example":8},"attendedMembers":{"type":"integer","description":"출석인원","format":"int32","example":7},"attendanceRate":{"type":"number","description":"출석률","format":"double","example":87.5},"averageQtCount":{"type":"number","description":"평균 QT 횟수","format":"double","example":4.3},"weeklyStats":{"type":"array","description":"주별 통계","items":{"$ref":"#/components/schemas/WeeklyStatistics"}}},"description":"GBS별 출석 통계"},"VillageStatistics":{"required":["attendanceRate","attendedMembers","averageQtCount","gbsStats","totalMembers","villageId","villageName"],"type":"object","properties":{"villageId":{"type":"integer","description":"마을 ID","format":"int64","example":1},"villageName":{"type":"string","description":"마을 이름","example":"1마을"},"gbsStats":{"type":"array","description":"GBS별 통계","items":{"$ref":"#/components/schemas/GbsStatistics"}},"totalMembers":{"type":"integer","description":"총원","format":"int32","example":30},"attendedMembers":{"type":"integer","description":"출석인원","format":"int32","example":25},"attendanceRate":{"type":"number","description":"출석률","format":"double","example":83.3},"averageQtCount":{"type":"number","description":"평균 QT 횟수","format":"double","example":4.1}},"description":"마을별 출석 통계"},"WeeklyStatistics":{"required":["attendanceRate","attendedMembers","averageQtCount","totalMembers","weekStart"],"type":"object","properties":{"weekStart":{"type":"string","description":"주차 시작일","format":"date","example":"2025-01-05"},"totalMembers":{"type":"integer","description":"총원","format":"int32","example":8},"attendedMembers":{"type":"integer","description":"출석인원","format":"int32","example":6},"attendanceRate":{"type":"number","description":"출석률","format":"double","example":75.0},"averageQtCount":{"type":"number","description":"평균 QT 횟수","format":"double","example":3.8}},"description":"주별 통계"},"GbsAttendanceSummary":{"required":["attendanceRate","attendedMembers","gbsId","gbsName","leaderName","memberAttendances","totalMembers"],"type":"object","properties":{"gbsId":{"type":"integer","description":"GBS 그룹 ID","format":"int64","example":1},"gbsName":{"type":"string","description":"GBS 그룹 이름","example":"믿음 GBS"},"leaderName":{"type":"string","description":"리더 이름","example":"이리더"},"totalMembers":{"type":"integer","description":"총 인원","format":"int32","example":8},"attendedMembers":{"type":"integer","description":"출석 인원","format":"int32","example":6},"attendanceRate":{"type":"number","description":"출석률","format":"double","example":75.0},"memberAttendances":{"type":"array","description":"조원별 출석 현황","items":{"$ref":"#/components/schemas/AttendanceResponse"}}},"description":"GBS 출석 요약"},"VillageAttendanceResponse":{"required":["gbsAttendances","villageId","villageName","weekStart"],"type":"object","properties":{"villageId":{"type":"integer","description":"마을 ID","format":"int64","example":1},"villageName":{"type":"string","description":"마을 이름","example":"1마을"},"weekStart":{"type":"string","description":"주차 시작일","format":"date","example":"2025-01-05"},"gbsAttendances":{"type":"array","description":"GBS별 출석 현황","items":{"$ref":"#/components/schemas/GbsAttendanceSummary"}}},"description":"마을 출석 현황 응답"},"DepartmentStatistics":{"required":["attendanceRate","attendedMembers","averageQtCount","departmentId","departmentName","endDate","startDate","totalMembers","villageStats"],"type":"object","properties":{"departmentId":{"type":"integer","description":"부서 ID","format":"int64","example":1},"departmentName":{"type":"string","description":"부서 이름","example":"대학부"},"startDate":{"type":"string","description":"기간 시작일","format":"date","example":"2025-01-01"},"endDate":{"type":"string","description":"기간 종료일","format":"date","example":"2025-01-31"},"villageStats":{"type":"array","description":"마을별 통계","items":{"$ref":"#/components/schemas/VillageStatistics"}},"totalMembers":{"type":"integer","description":"총원","format":"int32","example":120},"attendedMembers":{"type":"integer","description":"출석인원","format":"int32","example":92},"attendanceRate":{"type":"number","description":"출석률","format":"double","example":76.7},"averageQtCount":{"type":"number","description":"평균 QT 횟수","format":"double","example":3.5}},"description":"부서별 출석 통계"}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}